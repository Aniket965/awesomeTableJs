!function(e,t){"function"==typeof define&&define.amd?define(["awesomeTableJs"],t):e.awesomeTableJs=t(e.awesomeTableJs)}(this,function(){function e(e){if(this.globalOptions=e||{url:"",data:"",pageSize:15,tableWrapper:"",paginationWrapper:"",searchboxWrapper:"",pageSizeWrapper:""},this.globalOptions.tableWrapper&&(this.tableWrapper=document.querySelector(this.globalOptions.tableWrapper)),this.globalOptions.searchboxWrapper&&(this.searchboxWrapper=document.querySelector(this.globalOptions.searchboxWrapper)),this.globalOptions.paginationWrapper&&(this.paginationWrapper=document.querySelector(this.globalOptions.paginationWrapper)),this.globalOptions.pageSizeWrapper&&(this.pageSizeWrapper=document.querySelector(this.globalOptions.pageSizeWrapper)),this.tableWrapper){var t=document.createElement("table");t.className="aweTbl-table",this.tableElement=t,this.tableWrapper.appendChild(t)}else{var a=document.createElement("DIV");a.className="aweTbl-table-wrapper";var t=document.createElement("table");t.className="aweTbl-table",this.tableElement=t,a.appendChild(t),document.body.appendChild(a)}if(!this.paginationWrapper){var a=document.createElement("DIV");a.className="aweTbl-pagination-wrapper",this.paginationWrapper=a,document.body.appendChild(a)}if(!this.pageSizeWrapper){var a=document.createElement("DIV");a.className="aweTbl-pageCount-wrapper",this.pageSizeWrapper=a,document.body.appendChild(a)}if(!this.searchboxWrapper){var a=document.createElement("DIV");a.className="aweTbl-searchBox-wrapper",this.searchboxWrapper=a,document.body.appendChild(a)}this.jsonKeys=[]}function t(e,t,a){var n=a?function(t){return a(t[e])}:function(t){return t[e]};return t=t?-1:1,function(e,a){return e=n(e),a=n(a),t*((e>a)-(a>e))}}function a(e,t){var a=Math.ceil(e/this.globalOptions.pageSize),n=document.querySelector(".aweTbl-pagination");n&&(n.innerHTML="");var s=n||document.createElement("Div");s.className="aweTbl-pagination";var i={first:{start:null,end:null,showDot:null},middle:{start:null,end:null},last:{start:null,end:null,showDot:null}};if(a>10){3>=t?(i.first.start="1",i.first.end="5",i.last.start=a-1,i.last.end=a,i.last.showDot=!0):4==t?(i.first.start="1",i.first.end="6",i.last.start=a-1,i.last.end=a,i.last.showDot=!0):5==t?(i.first.start="1",i.first.end="7",i.last.start=a-1,i.last.end=a,i.last.showDot=!0):t>5&&a-t>3?(i.first.start="1",i.first.end="2",i.first.showDot=!0,i.middle.start=t-2,i.middle.end=t+2,i.last.start=a-1,i.last.end=a,i.last.showDot=!0):3>=a-t&&(i.first.start="1",i.first.end="2",i.first.showDot=!0,i.last.start=t-5,i.last.end=a);for(var r=i.first.start;r<=i.first.end;r++){var l=document.createElement("a");l.className="aweTbl-pagination-label".concat(r==t?" currentPage ":""),l.innerHTML=r,l.href="javascript:void(0);",l.addEventListener("click",this.paging.bind(this,r),!1),s.appendChild(l)}if(i.first.showDot){var l=document.createElement("a");l.className="aweTbl-pagination-label",l.innerHTML="..",l.href="javascript:void(0);",s.appendChild(l)}if(i.middle.start)for(var r=i.middle.start;r<=i.middle.end;r++){var l=document.createElement("a");l.className="aweTbl-pagination-label".concat(r==t?" currentPage ":""),l.innerHTML=r,l.href="javascript:void(0);",l.addEventListener("click",this.paging.bind(this,r),!1),s.appendChild(l)}if(i.last.showDot){var l=document.createElement("a");l.className="aweTbl-pagination-label",l.innerHTML="..",l.href="javascript:void(0);",s.appendChild(l)}for(var r=i.last.start;r<=i.last.end;r++){var l=document.createElement("a");l.className="aweTbl-pagination-label".concat(r==t?" currentPage ":""),l.innerHTML=r,l.href="javascript:void(0);",l.addEventListener("click",this.paging.bind(this,r),!1),s.appendChild(l)}}else for(var r=1;a>=r;r++){var l=document.createElement("a");l.className="aweTbl-pagination-label",l.innerHTML=r,l.href="javascript:void(0);",l.addEventListener("click",this.paging.bind(this,r),!1),s.appendChild(l)}this.paginationWrapper.appendChild(s)}function n(){var e=document.createElement("DIV");e.className="aweTbl-searchBox";var t=document.createElement("input");t.type="text",t.className="aweTbl-searchBox-input",t.placeholder="write + ENTER",t.addEventListener("change",this.filter.bind(this,t),!1),e.appendChild(t),this.searchboxWrapper.appendChild(e)}function s(e){if(200!==e.status)throw"i cant use url response as json,check url and make sure that it will respond as json";var t=JSON.parse(e.responseText);if(0==t.Length)throw"There is now recorde ro make a table with";sessionStorage.awesomeTabledata=e.responseText,l.call(this,t),a.call(this,t.length,1),n.call(this),i.call(this)}function i(){var e=document.createElement("select");e.className="aweTbl-pageSize";for(var t=1;5>=t;t++){var a=document.createElement("option");a.innerHTML=15*t,e.appendChild(a)}e.addEventListener("change",this.changePageSize.bind(this,""),!1),this.pageSizeWrapper.appendChild(e)}function r(e){var t=document.createElement("tbody"),a=e.length;if("object"==typeof e[0]){for(var n=this.jsonKeys.length,s=this.globalOptions.pageSize<a?this.globalOptions.pageSize:a,i=0;s>i;i++){var r=document.createElement("tr");for(j=0;j<n;j++){var l=document.createElement("td");l.innerHTML=e[i][this.jsonKeys[j]],r.appendChild(l)}t.appendChild(r)}var o=this.tableElement.querySelector("tbody");o&&this.tableElement.removeChild(o),this.tableElement.appendChild(t)}else console.log("string")}function l(e){var t=document.createElement("tbody"),a=e.length;if("object"==typeof e[0]){var n=document.createElement("thead");for(var s in e[0]){var i=document.createElement("th"),r=document.createElement("a");r.innerHTML=s,r.href="javascript:void(0);",r.setAttribute("data-sortKey",s),r.setAttribute("data-sortDirection","asc"),r.addEventListener("click",this.sort.bind(this,r)),i.appendChild(r),this.jsonKeys.push(s),n.appendChild(i)}for(var l=this.jsonKeys.length,o=this.globalOptions.pageSize<a?this.globalOptions.pageSize:a,p=0;o>p;p++){var c=document.createElement("tr");for(j=0;j<l;j++){var d=document.createElement("td");d.innerHTML=e[p][this.jsonKeys[j]],c.appendChild(d)}t.appendChild(c)}var h=this.tableElement.querySelector("tbody");h&&this.tableElement.removeChild(h),this.tableElement.appendChild(n),this.tableElement.appendChild(t)}else console.log("string")}return e.prototype.createTable=function(){if(!this.globalOptions.url)throw"please pass a url ,becuase i want to create table from its json result";var e=this,t=new XMLHttpRequest;console.log(e," self"),t.addEventListener("load",s.bind(e,t)),t.addEventListener("error",function(){throw"requesting that url come with an error \n"+this.responseText}),t.addEventListener("abort",function(){throw"request canceled by you"}),t.open("GET",this.globalOptions.url),t.send()},e.prototype.paging=function(e){if(e){var t=parseInt(e);console.log(e)}else var t=1;if(sessionStorage.awesomeTabledata){var n=JSON.parse(sessionStorage.awesomeTabledata),s=n.length,i=(t-1)*this.globalOptions.pageSize,l=n.splice(i,this.globalOptions.pageSize);a.call(this,s,t),r.call(this,l)}else this.createTable()},e.prototype.filter=function(e){var t=e.value;if(sessionStorage.awesomeTabledata){var n=JSON.parse(sessionStorage.awesomeTabledata),s=[];console.log(t);for(var i=0,l=n.length;l>i;i++)for(var o=0,p=this.jsonKeys.length;p>o;o++)if(n[i][this.jsonKeys[o]].toString().match(t)){s.push(n[i]);break}r.call(this,s),a.call(this,s.length,1),console.log(s)}else this.createTable()},e.prototype.sort=function(e){var a=e.getAttribute("data-sortkey");a=a||this.jsonKeys[0];var n=e.getAttribute("data-sortDirection");if(n=n||"asc",console.log("dirextion : ",n," key : ",a),sessionStorage.awesomeTabledata){var s=JSON.parse(sessionStorage.awesomeTabledata);s.sort(t(a,"asc"==n,null)),sessionStorage.awesomeTabledata=JSON.stringify(s),r.call(this,s),e.setAttribute("data-sortDirection","asc"==n?"desc":"asc")}else this.createTable()},e.prototype.changePageSize=function(e){console.log(e);var t=parseInt(e,10);if(t>0)this.globalOptions.pageSize=t;else{var a=document.querySelector(".aweTbl-pageSize");a?this.globalOptions.pageSize=parseInt(a.value,10):this.globalOptions.pageSize=15}this.paging(1)},e});